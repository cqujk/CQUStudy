以太网是局域网的同义词

# 适配器
计算机与外界局域网的连接是通过适配器，网络接口板/网络接口卡 NIC

*适配器和局域网之间*通过电缆或双绞线以*串行*传输方式进行，而*适配器和计算机之间*通过计算机主板上的 I/O 总线以*并行*传输方式进行
	由于数据率并不相同，因此在适配器中必须装有对数据进行缓存的存储芯片
	适配器一个重要功能是进行串并行的转换
主板上插入适配器时，还必须把管理该适配器的设备驱动程序安装在计算机的操作系统中
	会告诉适配器，应从存储器的什么位置上把多长的数据块发送到局域网
	或者应当在存储器的什么位置上把局域网传送过来的数据块存储下来
适配器接收和发送各种帧时，不使用计算机 CPU
接收时，若有差错，则直接丢弃
	若无差错，使用中断来通知计算机，并交付协议栈中的网络层
发送 IP 数据报时，由协议栈把 IP 数据报向下交给适配器，组装成帧后发送到局域网

现在适配器基本在出厂的时候就已经内嵌了
# CSMA/CD
一个碰撞算法
# 集线器的星形拓扑

？
# 以太网 MAC层
局域网中的硬件地址是物理地址或 MAC 地址，因为这种地址用在 MAC帧中
固化在*适配器*的 ROM 中的地址，48 位 2 进制，6个字节
注册管理机构 RA，负责分配地址字段的 6 个字节中的前三个字节，即高位 24位
	凡是要生产局域网适配器的厂家都必须向 IEEE 购买这三个字节构成的这个号，即地址块
		正式名称是组织唯一标识符 OUI，公司标识符
地址字段中的后三个字节，由厂家自行指派，为扩展标识符
最终这 6 个字节固化在适配器的 ROM 中，为这台计算机（或手机）的 MAC 地址

G/L，为 0 时为全球管理，保证在全球没有相同的地址
	为 1 时是本地管理，可任意分配网络上的地址

当路由器通过适配器连接到局域网时，适配器上的硬件地址就用来标志路由器的某个接口
	如果同时连接到两个网络上，就需要两个适配器和两个硬件地址

## 在物理层扩展以太网
一个独立的碰撞域，在任意时刻，只能有一个站在发送数据
## 在数据链路层扩展以太网

网桥对收到的帧根据其 MAC帧的目的地址进行转发和过滤
	根据此帧的目的 MAC 地址，查找网桥中的地址表，然后确定将该帧转发到哪一个端口
### 以太网交换机
交换表中，有 MAC 地址与端口，以及写入时间
	MAC 地址就是连接的计算机的硬件地址
	端口是指计算机连在交换机上的端口
	端口更换主机或者主机更换其网络适配器，需要即时更改交换表中的项目，只要超过预先设定的时间，如 300 s, 该项目就自动被删除
	
一个端口和连接到端口的主机构成了一个碰撞域，有 N 个端口的以太网交换机的碰撞域共有 N个
	内部的帧交换表、地址表通过自学习算法自动地建立起来，内容可寻址存储器 CAM

#### 自学习算法
为了解决兜圈子问题，使用生成树协议 STP，使从一台主机到所有其它主机的路径都是无环路的树状结构

### 虚拟局域网 VLAN
*一个以太网是一个广播域，经常出现大量广播帧*
	以太网中的各个计算机就是通过交换机来建立起来的，联通各计算机的 MAC 地址
交换机的交换表建立中要使用许多广播帧

VLAN 把一个较大的局域网分割成一些较小的局域网
![[Pasted image 20240917153344.png]]
每一个 VLAN 的帧都有一个明确的标识符，指明发送这个帧的计算机属于哪一个 VLAN
VLAN 标签，标签类型 2 字节，标签控制信息 2字节
	前 2字节固定为 0x8100
	后 2 字节，前 4 位没用，后 12 位是 VLAN 标识符 VID，唯一地标志了帧属于哪一个 VLAN
*当数据链路层检测到 MAC 帧的源地址字段后面的两个字节是 0 x 8100 时，就知道现在插入了 4 字节的 VLAN 标签*
![[Pasted image 20240917170551.png]]
两个虚拟局域网 VLAN-10, VLAN-20 虽然都跨越了两个交换机，但各自是一个广播域
A 向 E 发送帧
	*A 和 E 同属一个虚拟局域网 VLAN-10*，查到 E 没有连接到本交换机 1，因此必须从汇聚链路把帧转发到 2，但在转发之前，必须插入 VLAN 标签，插入 VLAN 标签后就是 802.1 Q 帧
	*2 识别 VLAN 标签，发现属于此广播域下*，在向 E转发之前，要拿走已插入标签，因此 E 收到的帧就是 A 发送的标准以太网帧，而不是 802.1 Q帧
	
*802.1 Q 帧就是在同一虚拟局域网下，但在不同交换机之间进行传播时，分组的形式*

A 向 C 发送帧
	虽然同属于一个交换机，但在不同的网络中
		若没有虚拟局域网，则就是同一个局域网下
	涉及到网络层的运作，超出了链路层

### 吉比特以太网
以太网一个很重要的参数 a，为单程端到端时延 $\tau$ 除以帧的发送时间 $T_0$ 之比
$T_0$ 是帧长与发送速率之比
$a=\frac{\tau}{T_0}=\frac{\tau * v}{lenth}$
*应当使 a 保持在低的水平*
端到端时延与网络电缆长度有关
	长度越长，则这个时延越高
发送速率，即数据率
	如果数据率快，说明上传数据很快，但是传播的很慢，也会很卡

数据率提高，只有减小最大电缆长度或*增大帧的最小长度*，才能使 a 保持为较小的数值
	若减小电缆长度，相当于联网的范围变短了，网络的实际价值减小

载波延伸：使最短帧长仍为 64 字节，保持兼容性
凡发送的 MAC 帧长不足 512 字节，就用一些特殊字符填充在帧的后面，使其为 512 字符，这样使发送时的帧长增大，但对有效载荷并无影响
	有效载荷表示一个分组中，去掉首部和尾部的控制字段后，剩下的有用的数据部分

分组突发：当很多短帧要发送时，第一个短帧采用载波延伸的方法进行填充，但随后的一些短帧则可一个接一个地发送，之间留有必要的帧间最小间隔

### 10 GbE
只工作在全双工方式，不存在争用问题，*也不使用 CSMA/CD协议*，*也不再受必须进行碰撞检测的限制*，使传输距离大大提高

光纤宽带接入 FTTx，使用 PPPoE 的方式进行接入
#？
RJ-45 和 5 类线，即以太网使用的网线
PPPoE 是为宽带上网的主机使用的链路层协议